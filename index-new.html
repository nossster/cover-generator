<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Генератор обложек для игр</title>
    <link href="css/styles.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <header class="header">
            <h1 class="header-title">
                <i class="bi bi-palette header-icon"></i>
                Генератор обложек игр
            </h1>
            <p class="header-subtitle">Создавайте профессиональные обложки для ваших игр</p>
        </header>
        
        <div class="main-container">
            <aside class="sidebar">
                <div class="layers-panel">
                    <h2 class="panel-title">
                        <i class="bi bi-layers"></i>
                        Настройки
                    </h2>
                    
                    <!-- Тип обложки -->
                    <div class="layer-card">
                        <div class="layer-header">
                            <span class="layer-name">Тип обложки</span>
                        </div>
                        <div class="layer-controls">
                            <div class="control-label">
                                <label for="coverTypeSelect">Выберите тип</label>
                                <select id="coverTypeSelect" class="select-dropdown">
                                    <option value="type1" selected>Обложка тип 1</option>
                                    <option value="type2">Обложка тип 2</option>
                                    <option value="custom">Дизайнерский</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Логотип -->
                    <div class="layer-card">
                        <div class="layer-header">
                            <span class="layer-name">Логотип</span>
                        </div>
                        <div class="layer-preview" id="logo-preview">
                            <div class="layer-empty">Выберите логотип</div>
                        </div>
                        <div class="layer-controls">
                            <div class="control-label">
                                <label for="iconSelect">Выберите логотип</label>
                                <select id="iconSelect" class="select-dropdown">
                                    <option value="none" selected>Без логотипа</option>
                                    <option value="club">Club</option>
                                    <option value="rental">Rental</option>
                                    <option value="steam">Steam</option>
                                    <option value="origin">Origin</option>
                                </select>
                            </div>
                            <div class="control-label">
                                <button id="uploadBtn2" class="btn btn-secondary">
                                    <i class="bi bi-upload"></i> Загрузить свой
                                </button>
                            </div>
                            <div class="control-label">
                                <button id="logo-center" class="btn btn-primary">Центр</button>
                                <button id="logo-recommended-size" class="btn btn-primary">Рек. размер</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фон -->
                    <div class="layer-card">
                        <div class="layer-header">
                            <span class="layer-name">Фон</span>
                        </div>
                        <div class="layer-preview" id="background-preview">
                            <div class="layer-empty">Фоновое изображение</div>
                        </div>
                        <div class="layer-controls">
                            <div class="control-label">
                                <button id="uploadBtn1" class="btn btn-success">
                                    <i class="bi bi-upload"></i> Загрузить фон
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Дополнительная картинка -->
                    <div class="layer-card">
                        <div class="layer-header">
                            <span class="layer-name">Доп. картинка</span>
                        </div>
                        <div class="layer-preview" id="topmost-preview">
                            <div class="layer-empty">Дополнительное изображение</div>
                        </div>
                        <div class="layer-controls">
                            <div class="control-label">
                                <button id="uploadBtn3" class="btn btn-secondary">
                                    <i class="bi bi-upload"></i> Загрузить
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Настройки для custom режима -->
                    <div id="custom-layers-container" style="display: none;">
                        <div class="layer-card">
                            <div class="layer-header">
                                <span class="layer-name">Размеры</span>
                            </div>
                            <div class="layer-controls">
                                <div class="control-label">
                                    <label for="custom-width">Ширина</label>
                                    <input type="number" id="custom-width" class="select-dropdown" value="1024" min="100" max="3000">
                                </div>
                                <div class="control-label">
                                    <label for="custom-height">Высота</label>
                                    <input type="number" id="custom-height" class="select-dropdown" value="1024" min="100" max="3000">
                                </div>
                                <div class="control-label">
                                    <button id="apply-custom-size" class="btn btn-success">
                                        <i class="bi bi-check2-circle"></i> Применить размер
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="layer-card">
                            <div class="layer-header">
                                <span class="layer-name">Загрузка слоев</span>
                            </div>
                            <div class="layer-controls">
                                <div class="control-label">
                                    <button id="upload-bg-btn" class="btn btn-primary">
                                        <i class="bi bi-upload"></i> PNG с маской
                                    </button>
                                </div>
                                <div class="control-label">
                                    <button id="upload-top-layer-btn" class="btn btn-primary">
                                        <i class="bi bi-upload"></i> Верхний слой
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Фильтры -->
                    <div class="layer-card">
                        <div class="layer-header">
                            <span class="layer-name">Фильтры</span>
                        </div>
                        <div class="layer-controls">
                            <div class="control-label">
                                <label for="topLayerColorFilter">Цветовой фильтр</label>
                                <select id="topLayerColorFilter" class="select-dropdown">
                                    <option value="none" selected>Без фильтра</option>
                                    <option value="red">Красный</option>
                                    <option value="green">Зеленый</option>
                                    <option value="blue">Синий</option>
                                    <option value="yellow">Желтый</option>
                                    <option value="purple">Фиолетовый</option>
                                    <option value="orange">Оранжевый</option>
                                    <option value="custom">Свой цвет</option>
                                </select>
                            </div>
                            <div id="customColorContainer" class="control-label" style="display: none;">
                                <label for="customTopLayerColor">Выберите цвет</label>
                                <input type="color" id="customTopLayerColor" class="select-dropdown" value="#ff0000">
                            </div>
                            <div id="filterOptionsContainer" class="control-label" style="display: none;">
                                <label for="filterOpacity">Прозрачность</label>
                                <input type="range" id="filterOpacity" class="slider" min="0" max="1" step="0.1" value="0.5">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Настройки логотипа -->
                    <div class="layer-card">
                        <div class="layer-header">
                            <span class="layer-name">Позиция логотипа</span>
                        </div>
                        <div class="layer-controls">
                            <div class="control-label">
                                <label for="logoX">X позиция</label>
                                <input type="range" id="logoX" class="slider" min="0" max="100" value="50">
                            </div>
                            <div class="control-label">
                                <label for="logoY">Y позиция</label>
                                <input type="range" id="logoY" class="slider" min="0" max="100" value="50">
                            </div>
                            <div class="control-label">
                                <label for="logoScale">Масштаб</label>
                                <input type="range" id="logoScale" class="slider" min="0.1" max="3" step="0.1" value="1">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Сохранение -->
                    <div class="layer-card">
                        <div class="layer-header">
                            <span class="layer-name">Сохранение</span>
                        </div>
                        <div class="layer-controls">
                            <div class="control-label">
                                <button id="saveManual" class="btn btn-success">
                                    <i class="bi bi-download"></i> Сохранить
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
            
            <main class="canvas-container">
                <div class="canvas-toolbar">
                    <h3>Предварительный просмотр</h3>
                    <div class="toolbar-spacer"></div>
                    <button id="saveBlobUrl" class="btn btn-primary">
                        <i class="bi bi-download"></i> Экспорт 1
                    </button>
                    <button id="saveDataUrl" class="btn btn-primary">
                        <i class="bi bi-download"></i> Экспорт 2
                    </button>
                </div>
                
                <div class="canvas-wrapper">
                    <canvas id="iconCanvas" width="600" height="900"></canvas>
                </div>
            </main>
        </div>
    </div>

    <!-- Скрытые input для загрузки файлов -->
    <input type="file" id="imageUpload1" accept="image/*" style="display: none;">
    <input type="file" id="imageUpload2" accept="image/*" style="display: none;">
    <input type="file" id="imageUpload3" accept="image/*" style="display: none;">
    <input type="file" id="bg-upload" style="display: none;" accept="image/*">
    <input type="file" id="top-layer-upload" style="display: none;" accept="image/*">

    <!-- Подключение скриптов -->
    <script src="js/script.js"></script>
    <script src="js/script-functions.js"></script>
    <script src="js/script-events.js"></script>
    <script src="js/script-init.js"></script>
    <script>
        // Вызываем инициализацию приложения после загрузки всех скриптов
        document.addEventListener('DOMContentLoaded', () => {
            init();
        });
    </script>
</body>
</html>

